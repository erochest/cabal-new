
PORT=9090

all: init test docs package

init:
	cabal sandbox init
	make deps

test: build
	yesod test

run:
	cabal run

# docs:
# generate api documentation
#
# package:
# build a release tarball or executable
#
# install:
# generate executable and put it into `/usr/local`
#
# deploy:
# prep and push

dev:
	yesod devel --port=${PORT}

hlint:
	hlint *.hs src specs

clean:
	cabal clean

distclean: clean
	cabal sandbox delete

configure: clean
	yesod configure

deps: clean
	cabal install --only-dependencies --allow-newer ${FLAGS}
	make configure

build:
	yesod build

rebuild: clean configure build

.PHONY: all init test run clean distclean configure deps build rebuild hlint
